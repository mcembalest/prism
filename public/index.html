<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Prism - Redis Learning Environment</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css" />
  <style>
    * { box-sizing: border-box; }
    body { margin: 0; padding: 0; background: #1e1e1e; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif; overflow: hidden; }
    #header { background: #2d2d2d; color: #e0e0e0; padding: 12px 20px; border-bottom: 2px solid #007acc; }
    #header h1 { margin: 0; font-size: 18px; font-weight: normal; font-family: 'Courier New', monospace; }
    #main-container { display: flex; height: calc(100vh - 50px); position: relative; }
    #terminal-panel { width: calc(100% - 404px); padding: 20px; background: #1e1e1e; min-width: 300px; }
    #terminal { width: 100%; height: 100%; }
    #divider { width: 4px; background: #3e3e42; cursor: col-resize; transition: background 0.2s ease; position: relative; flex-shrink: 0; }
    #divider:hover { background: #007acc; }
    #right-panel { width: 400px; min-width: 350px; background: #252526; display: flex; flex-direction: column; position: relative; }
    #progress-mini { position: absolute; top: 15px; right: 15px; display: flex; align-items: center; gap: 12px; padding: 10px 15px; background: #2d2d2d; border-radius: 8px; z-index: 100; box-shadow: 0 2px 8px rgba(0,0,0,0.3); }
    #progress-full { position: absolute; top: 85px; right: 15px; width: 280px; background: #2d2d2d; border: 1px solid #3e3e42; border-radius: 8px; padding: 15px; z-index: 99; box-shadow: 0 4px 12px rgba(0,0,0,0.4); display: none; }
    #progress-mini:hover + #progress-full, #progress-full:hover { display: block; }
    .progress-full-item { margin-bottom: 12px; }
    .progress-label { font-size: 12px; color: #999; margin-bottom: 4px; }
    .progress-value { font-size: 13px; color: #e0e0e0; font-weight: 500; }
    .progress-circles-mini, .progress-circles { display: flex; gap: 6px; align-items: center; }
    .progress-circles { gap: 8px; margin-top: 5px; }
    .progress-circle { width: 12px; height: 12px; border-radius: 50%; background: #666666; transition: background 0.3s ease, box-shadow 0.3s ease; }
    .progress-circle.completed { background: #4ec9b0; }
    .progress-circle.current { background: #ff8c42; box-shadow: 0 0 0 3px rgba(255, 140, 66, 0.3); }
    .radial-progress { position: relative; width: 50px; height: 50px; flex-shrink: 0; }
    .radial-progress-bg { fill: none; stroke: #3e3e42; stroke-width: 6; }
    .radial-progress-fill { fill: none; stroke: #ff8c42; stroke-width: 6; transform: rotate(-90deg); transform-origin: 50% 50%; transition: stroke-dashoffset 0.3s ease; }
    .radial-progress-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #e0e0e0; font-size: 12px; font-weight: 600; }
    #chat-section { display: flex; flex-direction: column; flex: 1; min-height: 0; padding-top: 80px; }
    #chat-header h2 { margin: 0; font-size: 16px; color: #e0e0e0; padding: 12px 15px; border-bottom: 1px solid #3e3e42; background: #2d2d2d; }
    #chat-messages { flex: 1; overflow-y: auto; overflow-x: hidden; padding: 10px 15px; min-height: 0; scroll-behavior: smooth; }
    .message { margin-bottom: 10px; }
    .message .message-header { font-size: 12px; color: #999; margin-bottom: 6px; }
    .message .message-content { background: #1e1e1e; border-left: 3px solid #3e3e42; padding: 10px 12px; border-radius: 4px; color: #d4d4d4; white-space: pre-wrap; word-wrap: break-word; }
    .message.system .message-content { border-left-color: #4ec9b0; background: #1a2f2a; }
    .message.success .message-content { border-left-color: #4ec9b0; }
    .message-icon { color: #4ec9b0; margin-right: 8px; }
    .message-sender { color: #e0e0e0; font-weight: 500; }
    .question-container { margin: 10px 0; }
    .question-title { color: #ff8c42; font-weight: 600; margin-bottom: 8px; font-size: 14px; }
    .question-options { margin: 12px 0; display: flex; flex-direction: column; gap: 8px; }
    .question-option { background: #2d2d2d; border: 1px solid #3e3e42; border-radius: 6px; padding: 10px 12px; cursor: pointer; transition: all 0.2s ease; display: flex; align-items: center; gap: 10px; }
    .question-option:hover { background: #363636; border-color: #007acc; }
    .option-number { background: #007acc; color: white; border-radius: 4px; padding: 2px 8px; font-size: 12px; font-weight: 600; min-width: 24px; text-align: center; }
    #chat-input-container { padding: 15px 20px; border-top: 1px solid #3e3e42; background: #2d2d2d; }
    #chat-input-wrapper { display: flex; gap: 10px; align-items: center; }
    #chat-input { flex: 1; background: #1e1e1e; border: 1px solid #3e3e42; color: #d4d4d4; padding: 10px 12px; border-radius: 4px; font-size: 14px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif; }
    #chat-input:focus { outline: none; border-color: #007acc; }
    #chat-input::placeholder { color: #666; }
    #chat-send-button { background: #007acc; color: white; border: none; padding: 10px 20px; border-radius: 4px; font-size: 14px; font-weight: 500; cursor: pointer; transition: background 0.2s ease; }
    #chat-send-button:hover { background: #006bb3; }
  </style>
</head>
<body>
  <div id="header"><h1>Prism - Redis Learning Environment</h1></div>
  <div id="main-container">
    <div id="terminal-panel"><div id="terminal"></div></div>
    <div id="divider"></div>
    <div id="right-panel">
      <div id="progress-mini">
        <div class="radial-progress">
          <svg width="50" height="50">
            <circle class="radial-progress-bg" cx="25" cy="25" r="20"></circle>
            <circle class="radial-progress-fill" id="radial-progress-fill" cx="25" cy="25" r="20" stroke-dasharray="126" stroke-dashoffset="126"></circle>
          </svg>
          <div class="radial-progress-text" id="radial-progress-text">0/0</div>
        </div>
        <div class="progress-circles-mini" id="progress-circles-mini"></div>
      </div>
      <div id="progress-full">
        <div class="progress-full-item"><div class="progress-label">Current Topic</div><div class="progress-value" id="current-topic">Starting...</div></div>
        <div class="progress-full-item"><div class="progress-circles" id="progress-circles-full"></div></div>
        <div class="progress-full-item"><div class="progress-label">Current Exercise</div><div class="progress-value" id="current-exercise">Waiting for lesson...</div></div>
        <div id="action-buttons">
          <button class="action-button hint-button" id="hint-button">Hint</button>
          <button class="action-button skip-button" id="skip-button">Skip</button>
        </div>
      </div>
      <div id="chat-section">
        <div id="chat-header"><h2>Tutor</h2></div>
        <div id="chat-messages"></div>
        <div id="chat-input-container">
          <div id="chat-input-wrapper">
            <input type="text" id="chat-input" placeholder="Type answer, ask a question, or use terminal..." autocomplete="off">
            <button id="chat-send-button">Send</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.js"></script>
  <script src="app.js"></script>
</body>
</html>
